<Page
    x:Class="Bangumi.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Bangumi"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    mc:Ignorable="d"
    NavigationCacheMode="Enabled"
    Loaded="Page_Loaded"
    Background="{ThemeResource SystemChromeLowColor}">
    
    <Grid>
        <Frame Name="MyFrame" />

        <CommandBar x:Name="MyCommandBar"
                    x:FieldModifier="public"
                    VerticalAlignment="Bottom"
                    RequestedTheme="Dark"
                    Background="{ThemeResource SystemControlAltMediumLowAcrylicElementMediumBrush}">
            <AppBarButton Name="OfflineAppBarButton"
                          x:FieldModifier="public"
                          Label="离线模式"
                          ToolTipService.ToolTip="点击检测网络"
                          Click="OfflineAppBarButton_Click"
                          Visibility="{x:Bind IsOffline, Mode=OneWay}">
                <FontIcon FontFamily="Segoe MDL2 Assets" 
                          Glyph="&#xE7BA;" />
            </AppBarButton>
            <AppBarButton Name="CollectionAppBarButton"
                          x:FieldModifier="public"
                          IsEnabled="{Binding ElementName=RefreshAppBarButton,Path=IsEnabled}"
                          Label="收藏"
                          ToolTipService.ToolTip="收藏"
                          Visibility="Collapsed">
                <FontIcon Name="CollectionAppBarButtonFontIcon" 
                          x:FieldModifier="public"
                          FontFamily="Segoe MDL2 Assets" 
                          Glyph="&#xE006;"/>
            </AppBarButton>
            <AppBarButton Name="WebPageAppBarButton"
                          x:FieldModifier="public"
                          Label="访问网页"
                          ToolTipService.ToolTip="访问网页"
                          Visibility="Collapsed">
                <FontIcon FontFamily="Segoe MDL2 Assets" 
                          Glyph="&#xE12A;" />
            </AppBarButton>
            <AppBarSeparator Visibility="{Binding ElementName=WebPageAppBarButton,Path=Visibility}" />
            <AppBarButton Icon="Find" 
                          Label="搜索"
                          ToolTipService.ToolTip="搜索"
                          Click="SearchButton_Click"/>
            <AppBarButton Name="RefreshAppBarButton" 
                          x:FieldModifier="public"
                          Icon="Refresh" 
                          Label="刷新"
                          ToolTipService.ToolTip="刷新"/>
            <AppBarButton Icon="Setting" 
                          Label="设置"
                          ToolTipService.ToolTip="设置"
                          Click="SettingButton_Click"/>
            <CommandBar.SecondaryCommands>
                <AppBarButton Name="LoginButton"
                              Label="登录"
                              Click="LoginButton_Click">
                    <AppBarButton.Icon>
                        <FontIcon Name="UserIcon" 
                                  FontFamily="Segoe MDL2 Assets" 
                                  Glyph="&#xEE57;"/>
                    </AppBarButton.Icon>
                </AppBarButton>
            </CommandBar.SecondaryCommands>
        </CommandBar>

        
        <ProgressRing Name="MyProgressRing" 
                      Height="50" 
                      Width="50"/>

        <controls:InAppNotification x:Name="ToastInAppNotification"
                                    x:FieldModifier="public"
                                    ShowDismissButton="False"
                                    AnimationDuration="00:00:00.1000000"
                                    Margin="4,16,4,0"
                                    Padding="10"
                                    BorderThickness="1"
                                    Background="{ThemeResource SystemControlAcrylicElementBrush}"
                                    Foreground="RoyalBlue"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    VerticalOffset="-16"
                                    HorizontalOffset="0"
                                    StackMode="Replace" />

        <controls:InAppNotification x:Name="ErrorInAppNotification"
                                    x:FieldModifier="public"
                                    ShowDismissButton="False"
                                    AnimationDuration="00:00:00.1000000"
                                    Margin="4,16,4,0"
                                    Padding="10"
                                    BorderThickness="1"
                                    Background="{ThemeResource SystemControlAcrylicElementBrush}"
                                    Foreground="LightCoral"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    VerticalOffset="-16"
                                    HorizontalOffset="0"
                                    StackMode="Replace" />

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState>
                    <VisualState.StateTriggers>
                        <!--<AdaptiveTrigger
                        MinWindowWidth="{x:Bind NavView.CompactModeThresholdWidth}"/>-->
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!-- Leave the next line for left-only navigation. -->
                        <!--<Setter Target="ContentFrame.Padding" 
                                Value="12,0,12,12"/>-->
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>

</Page>
